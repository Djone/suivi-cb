<div class="home-container">
  <h1>Tableau de bord</h1>

  <!-- Affichage des soldes par compte -->
  <div class="accounts-grid">
    <div *ngFor="let accountBalance of accountBalances" class="account-section">
      <h2 [style.color]="accountBalance.account.color">{{ accountBalance.account.name }}</h2>

      <div class="balance-cards-container">
        <!-- Solde actuel -->
        <div class="balance-card current-balance clickable"
             (click)="navigateToTransactions(accountBalance.account.id!)">
          <div class="balance-header">
            <h3>Solde actuel</h3>
          </div>
          <div class="balance-amount-large"
               [class.negative]="accountBalance.currentBalance < 0"
               [class.positive]="accountBalance.currentBalance >= 0">
            {{ accountBalance.currentBalance | currency:'EUR':'symbol':'1.2-2':'fr' }}
          </div>
          <div class="click-hint">Cliquer pour voir les transactions</div>
        </div>

        <!-- Solde prévisionnel -->
        <div class="balance-card forecast-balance clickable"
             (click)="navigateToTransactions(accountBalance.account.id!)">
          <div class="balance-header">
            <h3>Solde prévisionnel</h3>
            <span class="subtitle">Après échéances du mois</span>
          </div>
          <div class="balance-amount-large"
               [class.negative]="accountBalance.forecastBalance < 0"
               [class.positive]="accountBalance.forecastBalance >= 0">
            {{ accountBalance.forecastBalance | currency:'EUR':'symbol':'1.2-2':'fr' }}
          </div>
          <div class="balance-detail">
            <span class="detail-label">Échéances du mois :</span>
            <span class="detail-value"
                  [class.negative]="(accountBalance.forecastBalance - accountBalance.currentBalance) < 0"
                  [class.positive]="(accountBalance.forecastBalance - accountBalance.currentBalance) >= 0">
              {{ (accountBalance.forecastBalance - accountBalance.currentBalance) | currency:'EUR':'symbol':'1.2-2':'fr' }}
            </span>
          </div>
          <div class="click-hint">Cliquer pour voir les transactions</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Message si aucun compte -->
  <div *ngIf="accountBalances.length === 0" class="no-data">
    <p>Aucun compte bancaire configuré.</p>
  </div>
</div>
