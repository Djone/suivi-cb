<div class="recurring-list-container">
  <h3>Liste des échéances récurrentes</h3>

  <div *ngIf="recurringTransactions.length === 0" class="empty-state">
    <p>Aucune échéance récurrente enregistrée</p>
  </div>

  <div *ngIf="recurringTransactions.length > 0" class="table-container">
    <table class="recurring-table">
      <thead>
        <tr>
          <th>Statut</th>
          <th>Type</th>
          <th>Compte</th>
          <th>Libellé</th>
          <th>Périodicité</th>
          <th>Jour</th>
          <th>Montant</th>
          <th>Sous-catégorie</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let recurring of recurringTransactions" [class.inactive-row]="!isActive(recurring)">
          <td>
            <span class="status-badge" [class.active]="isActive(recurring)" [class.inactive]="!isActive(recurring)">
              {{ isActive(recurring) ? 'Active' : 'Inactive' }}
            </span>
          </td>
          <td>
            <span class="type-badge" [class.revenue]="isRevenue(recurring.financialFlowId)" [class.expense]="isExpense(recurring.financialFlowId)">
              {{ getFinancialFlowName(recurring.financialFlowId) }}
            </span>
          </td>
          <td>
            <span class="account-badge" [style.color]="getAccountColor(recurring.accountId)">
              {{ getAccountName(recurring.accountId) }}
            </span>
          </td>
          <td>{{ recurring.label }}</td>
          <td class="frequency-cell">{{ getFrequencyLabel(recurring.frequency) }}</td>
          <td class="day-cell">{{ getDayLabel(recurring) }}</td>
          <td class="amount-cell" [class.revenue-amount]="isRevenue(recurring.financialFlowId)" [class.expense-amount]="isExpense(recurring.financialFlowId)">
            {{ isExpense(recurring.financialFlowId) ? '-' : '+' }}{{ recurring.amount | number:'1.2-2' }} €
          </td>
          <td>{{ getSubCategoryName(recurring.subCategoryId) }}</td>
          <td class="actions-cell">
            <button class="action-btn edit-btn" (click)="editRecurringTransaction(recurring)" title="Éditer">
              <mat-icon>edit</mat-icon>
            </button>
            <button *ngIf="isActive(recurring)" class="action-btn deactivate-btn" (click)="deactivateRecurringTransaction(recurring)" title="Désactiver">
              <mat-icon>visibility_off</mat-icon>
            </button>
            <button *ngIf="!isActive(recurring)" class="action-btn activate-btn" (click)="reactivateRecurringTransaction(recurring)" title="Réactiver">
              <mat-icon>visibility</mat-icon>
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
